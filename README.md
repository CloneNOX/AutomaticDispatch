# AutomaticDispatch
本项目为基于FastText的自动派单系统。

### 目前进度

实现了使用FastText模型及官方Python接口，读入指定文本内容，进行分类。

### 文本预处理

通过jieba分词库，将输入的中文文本分词，按照FastText官方数据集样式，组织成`"__label__xxx aaa bbb ccc ddd"`的形式，存入.txt文件。

### 训练及测试

1. 数据文件通过excel文件存储，请确保所有数据都存放在`./data/`目录下，并确保`.xls/.xlsx`文件里拥有“工单编号”，“诉求标题”，“市民原始诉求”，“办理部门一级”，“办理部门二级”，“办理部门三级”，如果市民原始诉求可能为空，请确保“涉事主体”，“主题地址”，“事发地点”，“标签组”，“市民诉求”，“补充信息”等字段存在。可以通过修改`data.py`或`data.ipynb`中的代码内容来适配数据集。
2. 通过修改`config.json`中的内容来调整超参数
3. 运行

```sh
$ python data.py
```

把处理数据集为适当样式。

3. 运行

```sh
$ python train.py
```

以启动训练，或在`train-set.ipynb`中进行训练和测试

### 超参数

训练过程中发现：使用学习率为0.1时，在项目数据集中的训练效果最佳。在项目数据集中训练20个epoch左右，模型收敛。

### 部署接口

运行

```shell
$ python app.py
```

以将接口部署到指定端口上。确保`./model/`目录下有保存好的模型，且文件名与`config.json`对应。

### 针对使用的数据集的优化

1. 实际应用场景中，有出现某个标签数量过多的情况，此时数据集极度不均衡，将会影响模型的泛化性能，使其偏向于预测数量极大的标签。经过实验发现，当数量极大的标签占比约为50%使，模型不会出现只预测数量占优势标签的情况。

2. 实际应用场景中，通过分别合并2、3级标签中性质相同的标签。可以略微提高模型预测的准确率。
